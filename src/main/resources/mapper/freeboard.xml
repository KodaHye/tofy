<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.tofy.freeboard.repository.FreeBoardRepository">
	 <select id="listBoard" resultType="freeBoardDto">
	 	select * from free_board
	 </select>
	 
 	<select id="getBoard" parameterType="String" resultType="freeBoardDto">
	 	select * from free_board where free_board_no = #{boardNo}
 	</select>
 	
 	<update id="updateHit" parameterType="String">
		update free_board set free_board_hit = free_board_hit + 1 where free_board_no = #{boardNo}
 	</update>
 	
 	<delete id = "deleteBoard" parameterType="String">
 		delete from free_board where free_board_no = #{boardNo}
 	</delete>
 	
 	<select id="listComment" parameterType="String" resultType="freeBoardCommentDto">
 		select * from free_board_comment where free_board_no = #{boardNo}
 	</select>
 	
 	<delete id= "deleteComment" parameterType="String">
  		delete from free_board_comment 
  		where free_board_no = #{boardNo} and comment_no = #{commentNo}	
 	</delete>
 	
 	 <insert id="writeBoard" parameterType="freeBoardDto">
	 	insert into free_board (user_no, free_board_title, free_board_content)
	 	values(#{userNo}, #{freeBoardTitle}, #{freeBoardContent})	
	 </insert>
	 
	 <update id = "updateBoard" parameterType="freeBoardDto">
	 	update free_board
	 	<trim prefix="set" suffixOverrides=",">
			<if test="freeBoardTitle != null">free_board_title = #{freeBoardTitle},</if>
			<if test="freeBoardContent != null">free_board_content= #{freeBoardContent},</if>
	 	</trim>
	 	where free_board_no = #{freeBoardNo}
	 </update>
	 
	 <insert id="writeComment" parameterType="freeBoardCommentDto">
	 	insert into free_board_comment (user_no, free_board_no, comment_content)
	 	values(#{userNo}, #{boardNo}, #{commentContent})
	 </insert>
	 
	 <update id="updateComment" parameterType="freeBoardCommentDto">
	 	update free_board_comment
	 	<trim prefix="set" suffixOverrides=",">
			<if test="commentContent != null">comment_content = #{commentContent},</if>
	 	</trim>
	 	where comment_no = #{commentNo}
	 </update>
</mapper>